---
title: Exercise 1.14
layout: sicp
has_graph: true
has_math: true
---

Draw the tree illustrating the process generated by the `count-change` procedure of 1.2.2 in making change for 11 cents. What are the orders of growth of the space and number of steps used by this process as the amount to be changed increases?

We can start by modifying the procedure so that it records each function call to `cc`:

```racket
(define (print-spaces depth)
  (display (make-string (* 2 depth) #\space)))

(define (count-change amount)
  (cc amount 5 0))

(define (cc amount kinds-of-coins depth)
  (print-spaces depth)
  (display "(cc ")
  (display amount)
  (display " ")
  (display kinds-of-coins)
  (display ")")
  (newline)
  (cond ((= amount 0)
         (print-spaces depth)
         (display 1)
         (newline)
         1)
        ((or (< amount 0) 
             (= kinds-of-coins 0))
         (print-spaces depth)
         (display 0)
         (newline)
         0)
        (else 
         (+ (cc amount (- kinds-of-coins 1) (+ 1 depth))
            (cc (- amount (first-denomination 
                           kinds-of-coins))
                kinds-of-coins (+ 1 depth))))))

(define (first-denomination kinds-of-coins)
  (cond ((= kinds-of-coins 1) 1)
        ((= kinds-of-coins 2) 5)
        ((= kinds-of-coins 3) 10)
        ((= kinds-of-coins 4) 25)
        ((= kinds-of-coins 5) 50)))

(count-change 11)
```

This results in the following output:

```racket
(cc 11 5)
  (cc 11 4)
    (cc 11 3)
      (cc 11 2)
        (cc 11 1)
          (cc 11 0)
          0
          (cc 10 1)
            (cc 10 0)
            0
            (cc 9 1)
              (cc 9 0)
              0
              (cc 8 1)
                (cc 8 0)
                0
                (cc 7 1)
                  (cc 7 0)
                  0
                  (cc 6 1)
                    (cc 6 0)
                    0
                    (cc 5 1)
                      (cc 5 0)
                      0
                      (cc 4 1)
                        (cc 4 0)
                        0
                        (cc 3 1)
                          (cc 3 0)
                          0
                          (cc 2 1)
                            (cc 2 0)
                            0
                            (cc 1 1)
                              (cc 1 0)
                              0
                              (cc 0 1)
                              1
        (cc 6 2)
          (cc 6 1)
            (cc 6 0)
            0
            (cc 5 1)
              (cc 5 0)
              0
              (cc 4 1)
                (cc 4 0)
                0
                (cc 3 1)
                  (cc 3 0)
                  0
                  (cc 2 1)
                    (cc 2 0)
                    0
                    (cc 1 1)
                      (cc 1 0)
                      0
                      (cc 0 1)
                      1
          (cc 1 2)
            (cc 1 1)
              (cc 1 0)
              0
              (cc 0 1)
              1
            (cc -4 2)
            0
      (cc 1 3)
        (cc 1 2)
          (cc 1 1)
            (cc 1 0)
            0
            (cc 0 1)
            1
          (cc -4 2)
          0
        (cc -9 3)
        0
    (cc -14 4)
    0
  (cc -39 5)
  0
4
```

This output can also be visualized as a graph:

```mermaid
graph TB
    count11["count-change 11"] --> cc115["cc 11 5"]

    cc115 --> cc114["cc 11 4"]
    cc114 --> cc113["cc 11 3"]
    cc113 --> cc112["cc 11 2"]
    cc112 --> cc111["cc 11 1"]
    cc111 --> cc110["cc 11 0"]
    cc110 --> cc110ret["0"]
    cc111 --> cc101["cc 10 1"]
    cc101 --> cc100["cc 10 0"]
    cc100 --> cc100ret["0"]
    cc101 --> cc91["cc 9 1"]
    cc91 --> cc90["cc 9 0"]
    cc90 --> cc90ret["0"]
    cc91 --> cc81["cc 8 1"]
    cc81 --> cc80["cc 8 0"]
    cc80 --> cc80ret["0"]
    cc81 --> cc71["cc 7 1"]
    cc71 --> cc70["cc 7 0"]
    cc70 --> cc70ret["0"]
    cc71 --> cc61["cc 6 1"]
    cc61 --> cc60["cc 6 0"]
    cc60 --> cc60ret["0"]
    cc61 --> cc51["cc 5 1"]
    cc51 --> cc50["cc 5 0"]
    cc50 --> cc50ret["0"]
    cc51 --> cc41["cc 4 1"]
    cc41 --> cc40["cc 4 0"]
    cc40 --> cc40ret["0"]
    cc41 --> cc31["cc 3 1"]
    cc31 --> cc30["cc 3 0"]
    cc30 --> cc30ret["0"]
    cc31 --> cc21["cc 2 1"]
    cc21 --> cc20["cc 2 0"]
    cc20 --> cc20ret["0"]
    cc21 --> cc11["cc 1 1"]
    cc11 --> cc10["cc 1 0"]
    cc10 --> cc10ret["0"]
    cc11 --> cc01["cc 0 1"]
    cc01 --> cc01ret["1"]
    cc112 --> cc62["cc 6 2"]
    cc62 --> cc61_2["cc 6 1"]
    cc61_2 --> cc60_2["cc 6 0"]
    cc60_2 --> cc60_2ret["0"]
    cc61_2 --> cc51_2["cc 5 1"]
    cc51_2 --> cc50_2["cc 5 0"]
    cc50_2 --> cc50_2ret["0"]
    cc51_2 --> cc41_2["cc 4 1"]
    cc41_2 --> cc40_2["cc 4 0"]
    cc40_2 --> cc40_2ret["0"]
    cc41_2 --> cc31_2["cc 3 1"]
    cc31_2 --> cc30_2["cc 3 0"]
    cc30_2 --> cc30_2ret["0"]
    cc31_2 --> cc21_2["cc 2 1"]
    cc21_2 --> cc20_2["cc 2 0"]
    cc20_2 --> cc20_2ret["0"]
    cc21_2 --> cc11_2["cc 1 1"]
    cc11_2 --> cc10_2["cc 1 0"]
    cc10_2 --> cc10_2ret["0"]
    cc11_2 --> cc01_2["cc 0 1"]
    cc01_2 --> cc01_2ret["1"]
    cc62 --> cc12["cc 1 2"]
    cc12 --> cc11_3["cc 1 1"]
    cc11_3 --> cc10_3["cc 1 0"]
    cc10_3 --> cc10_3ret["0"]
    cc11_3 --> cc01_3["cc 0 1"]
    cc01_3 --> cc01_3ret["1"]
    cc12 --> cc-42["cc -4 2"]
    cc-42 --> cc-42ret["0"]
    cc113 --> cc13["cc 1 3"]
    cc13 --> cc12_2["cc 1 2"]
    cc12_2 --> cc11_4["cc 1 1"]
    cc11_4 --> cc10_4["cc 1 0"]
    cc10_4 --> cc10_4ret["0"]
    cc11_4 --> cc01_4["cc 0 1"]
    cc01_4 --> cc01_4ret["1"]
    cc12_2 --> cc-42_2["cc -4 2"]
    cc-42_2 --> cc-42_2ret["0"]
    cc13 --> cc-93["cc -9 3"]
    cc-93 --> cc-93ret["0"]
    cc114 --> cc-144["cc -14 4"]
    cc-144 --> cc-144ret["0"]
    cc115 --> cc-395["cc -39 5"]
    cc-395 --> cc-395ret["0"]
```

This graph allows us to see the shape of the process. The space requirements are proportional to the height of the deepest subtree, which is proportional to `amount`. Therefore the order of growth of the space of the process is $$\Theta(amount)$$.
